extends layout

block header
  include header
  +header(user)

block content
  h1= title
  if(user)
    a(href='/sendmessage') Send new message
  if(messageboard === undefined || messageboard.length === 0)
    p There are no messages to display.
  else
    if(user)
      if(user.membership === "Insider")
        ul
          each message in messageboard
            - const author = (message.message_author.admin ? message.message_author.fullname + " (admin) on " + message.message_timestamp + " said:" : message.message_author.fullname + " on " + message.message_timestamp + " said:")
            li= author
            | #{message.title}
            | #{message.message_content}
            if(user.admin)
              form(action="" method="POST")
                input#deletemessage(type="hidden" name="deletemessage" value=message._id.toString())
                button Delete message
    else
      ul
        each message in messageboard
          li #{message.title}
          | #{message.message_content}
  
